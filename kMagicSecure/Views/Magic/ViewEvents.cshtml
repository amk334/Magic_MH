@model IEnumerable<Magic.Domain.Event>

@{
    ViewBag.Title = "ViewEvents";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>ViewEvents</h2>

<p>
    @Html.ActionLink("Create New", "CreateEvent", new { controller = "Magic", action = "CreateEvent" })
</p>
<table class="table">
    <tr>
        <th>
					Name
				</th>
			<th>
				Round
			</th>
			<th>
				Players
			</th>
    </tr>

@foreach (var item in Model.OrderBy(ev=>ev.EventStartDate)) {
    <tr>
				<td>
					@item.name
				</td>
			<td>
				@item.CurrentRound
			</td>
			<td>
				@item.Players.Count
			</td>
        <td>
          @Html.ActionLink("Edit", "EditEvent", new { controller = "Magic", action = "EditEvent", eventName = item.name, newEvent = false}) |
          @Html.ActionLink("Players", "ListPlayers", new { controller = "Magic", action = "ListPlayers", eventName = item.name }) |
					@Html.ActionLink("GeneratePairings", "GeneratePairings", new { controller = "Magic", action = "GeneratePairings", eventName = item.name }) |
					@Html.ActionLink("PrizeSetup", "PrizeSetup", new { controller = "Magic", action = "PrizeSetup", eventName = item.name, round = item.CurrentRound })
					@Html.ActionLink("AssignPrizes", "AssignPrizes", new { controller = "Magic", action = "AssignPrizes", eventName = item.name, round = item.CurrentRound })
        </td>
    </tr>
}

</table>
